# Project File Structure

## 1. Overview

This document outlines the main file and directory structure of the Japanese Learning Website project. A comprehensive understanding of the structure helps in navigating the codebase and locating specific components.

*(The root `README.md` already contains an excellent, detailed file structure overview. This document can serve as a quick reference or be expanded with more specific details about the purpose of less obvious files or directories if needed.)*

## 2. Root Directory

```
Japanese_Learning_Website/
├── .env                    # Environment variables (local, not version-controlled)
├── .gitignore              # Specifies intentionally untracked files for Git
├── alembic.ini             # Alembic configuration file
├── app/                    # Main Flask application package
├── create_admin.py         # Script to create additional admin users
├── create_hiragana_lesson.py # Utility script for lesson creation
├── create_numbers_lesson.py  # Utility script for lesson creation
├── create_technology_lesson.py # Utility script for lesson creation
├── curl_examples.md        # cURL examples for API testing (if applicable)
├── deprecated/             # Older or unused files and directories
├── Documentation/          # Project documentation files (this directory)
├── fix_content_order.py    # Data migration script
├── instance/               # Instance folder (e.g., for SQLite DB, instance-specific config)
├── inspect_db.py           # Utility to inspect database contents
├── manual_migration.py     # Script for manual data migration tasks
├── migrate_database.py     # General purpose database migration script (likely for Alembic)
├── migrate_file_fields.py  # Data migration script
├── migrate_interactive_system.py # Data migration script
├── migrate_lesson_system.py # Script for initial data seeding and core migrations
├── migrate_page_numbers.py # Data migration script
├── migrations/             # Alembic database migration scripts
├── possible_next_steps.md  # Document outlining potential future work
├── requirements.txt        # Python package dependencies
├── run.py                  # Main script to run the Flask application
├── run_migrations.py       # Script to apply Alembic database migrations
└── setup_unified_auth.py   # Script for initial database schema setup and default admin
```

## 3. Key Directories

### 3.1. `app/` - Main Application Package
```
app/
├── __init__.py             # Application factory (create_app), initializes Flask app and extensions
├── ai_services.py          # Services for AI-powered content generation (e.g., OpenAI integration)
├── forms.py                # WTForms definitions for login, registration, content management, etc.
├── lesson_export_import.py # Logic for exporting and importing lesson data
├── models.py               # SQLAlchemy database models
├── routes.py               # Flask routes and view functions (controllers)
├── static/                 # Static files (CSS, JavaScript, images, user uploads)
│   ├── css/                # Custom CSS files (e.g., custom.css)
│   ├── images/             # Site-specific images (logos, backgrounds)
│   └── js/                 # Custom JavaScript files (if any)
│   └── uploads/            # Default directory for user-uploaded files (images, audio for lessons)
├── templates/              # Jinja2 HTML templates
│   ├── admin/              # Templates specific to the admin panel
│   │   ├── admin_index.html
│   │   ├── base_admin.html   # Base template for admin pages
│   │   └── manage_*.html   # Templates for managing various content types
│   ├── base.html           # Base template for user-facing pages
│   ├── index.html          # Homepage template
│   ├── lessons.html        # Template for listing lessons
│   ├── lesson_view.html    # Template for displaying a single lesson
│   ├── login.html          # User login page template
│   └── register.html       # User registration page template
└── utils.py                # Utility functions and helper classes (e.g., FileUploadHandler)
```

### 3.2. `migrations/` - Alembic Database Migrations
```
migrations/
├── versions/               # Contains individual migration script files generated by Alembic
├── README                  # Information about Alembic setup for this project
├── env.py                  # Alembic environment script, configures how migrations run
└── script.py.mako          # Template for new migration scripts
```

### 3.3. `instance/` - Instance Folder
- Contains configuration files and data that are specific to a particular instance of the application and should not be version-controlled.
- `site.db`: The SQLite database file is typically located here in development.
- `config.py`: (Optional) Instance-specific Flask configuration can be placed here.

### 3.4. `Documentation/`
- Contains all project documentation files in Markdown format, including this one.

### 3.5. `deprecated/`
- Contains old files, previous versions of modules, or experimental code that is no longer in active use but kept for historical reference.

## 4. Scripts in Root Directory

-   **`run.py`**: Entry point to start the Flask development server.
-   **`setup_unified_auth.py`**: Initializes the database schema (`db.create_all()`) and creates a default admin user. Intended for first-time setup.
-   **`run_migrations.py`**: Applies pending Alembic database migrations (`alembic upgrade head`).
-   **`create_admin.py`**: Allows creation of additional administrator accounts.
-   **`create_*.py` (e.g., `create_hiragana_lesson.py`)**: Utility scripts to populate the database with specific predefined lessons, often using AI services.
-   **`migrate_*.py` (e.g., `migrate_lesson_system.py`)**: Scripts for initial data seeding or specific data migration tasks that might be too complex for a standard Alembic data migration. `migrate_lesson_system.py` is crucial for initial content setup.
-   **`inspect_db.py`**: A utility script for developers to query or inspect the database contents directly.
-   **`fix_*.py`, `manual_migration.py`**: One-off scripts for specific data correction or migration tasks.

*(Refer to the root `README.md` for a more detailed visual representation and further notes on some of these files.)*
